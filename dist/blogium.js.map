{"version":3,"sources":["webpack:///webpack/bootstrap bf9d97cc9484b5c4549b","webpack:///./src/blogium.js","webpack:///./~/tiny-emitter/dist/tinyemitter.js","webpack:///./src/defaultOptions.js"],"names":["Blogium","options","config","getPosts","moreBtn","addEventListener","morePosts","bind","otherPosts","undefined","host","targetBlank","url","username","document","querySelector","wrapper","Promise","resolve","reject","posts","XMLHttpRequest","open","onreadystatechange","readyState","status","JSON","parse","response","send","then","postList","emit","renderPosts","items","catch","scope","allLinks","Array","from","querySelectorAll","forEach","element","href","includes","target","cachedPosts","ul","createElement","mediumWrap","length","slice","disabled","classList","add","post","index","blogPostTemplate","innerHTML","setLinkTarget","appendChild","postDate","Date","pubDate","toDateString","link","title","description","defaults"],"mappings":"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","file":"blogium.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap bf9d97cc9484b5c4549b\n **/","import Emitter from '../node_modules/tiny-emitter/dist/tinyemitter.js';\nimport defaults from './defaultOptions.js';\n\nexport default class Blogium extends Emitter {\n  constructor(options) {\n    super();\n\n    this.config(options);\n    this.getPosts();\n\n    this.moreBtn.addEventListener('click', this.morePosts.bind(this), false);\n  }\n\n  config(options) {\n    this.otherPosts = undefined;\n    this.host = options.host || defaults.host;\n    this.targetBlank = options.targetBlank || defaults.targetBlank;\n    this.url = `http://rss2json.com/api.json?rss_url=https://medium.com/feed/${options.username || defaults.username}`;\n    this.moreBtn = document.querySelector(options.moreBtn) || document.querySelector(defaults.moreBtn);\n    this.wrapper = document.querySelector(options.wrapper) || document.querySelector(defaults.wrapper);\n  }\n\n  getPosts() {\n    let getPosts = new Promise((resolve, reject) => {\n      let posts = new XMLHttpRequest();\n\n      posts.open(\"GET\", this.url, true);\n\n      posts.onreadystatechange = function () {\n        if (posts.readyState === 4 && posts.status === 200) {\n          resolve(JSON.parse(posts.response));\n        } else if(posts.status !== 200) {\n          reject(posts.response)\n        }\n      };\n\n      posts.send();\n    })\n    .then((postList)=> {\n      this.emit('blogium.success', postList);\n      this.renderPosts(postList.items)\n    })\n    .catch((response) => {\n      this.emit('blogium.error', response);\n    });\n  }\n\n  setLinkTarget(scope = document) {\n    const allLinks = Array.from(scope.querySelectorAll('a'));\n\n    allLinks.forEach((element) => {\n      element.href.includes(this.host) ? element.target = '_self' : element.target = '_blank';\n    });\n\n  }\n\n  renderPosts(posts) {\n    let cachedPosts = '',\n        ul = document.createElement('ul'),\n        mediumWrap = document.querySelector('.mediumWrap');\n\n    if (posts.length > 5) {\n      this.otherPosts = posts.slice(4);\n      this.moreBtn.disabled = false;\n    } else {\n      this.otherPosts = undefined;\n    }\n\n    ul.classList.add('postList');\n\n    posts.forEach((post, index) => {\n      if (index < 4) {\n        cachedPosts += this.blogPostTemplate(post);\n      }\n\n    });\n\n    ul.innerHTML = cachedPosts;\n    this.setLinkTarget(ul);\n    this.wrapper.appendChild(ul);\n  }\n\n  morePosts() {\n    if(!this.otherPosts) return;\n    this.moreBtn.disabled = true;\n\n    this.renderPosts(this.otherPosts);\n  }\n\n  blogPostTemplate(post) {\n    let postDate = new Date(post.pubDate).toDateString();\n\n    return `<li class=\"blogiumPost\">\n        <a class=\"blogiumPost-link\" href=\"${post.link}\">\n          <span class=\"blogiumPost-date\">${postDate}</span>\n          <h3 class=\"blogiumPost-title\">${post.title}</h3>\n        </a>\n        <section class=\"blogiumPost-description\">\n          ${post.description}\n        </section>\n      </li>`;\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/blogium.js\n **/","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.TinyEmitter = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nfunction E () {\n\t// Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n\ton: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n\n},{}]},{},[1])(1)\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/tiny-emitter/dist/tinyemitter.js\n ** module id = 2\n ** module chunks = 0\n **/","const defaults = {\n  // host: document.location.host,\n  username: '@Medium',\n  moreBtn: '#moreBtn', //id\n  wrapper: '.mediumWrap', //class\n  targetBlank: true,\n};\n\nexport default defaults;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/defaultOptions.js\n **/"],"sourceRoot":""}